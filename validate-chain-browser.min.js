!function t(e,r,i){function n(a,h){if(!r[a]){if(!e[a]){var o="function"==typeof require&&require;if(!h&&o)return o(a,!0);if(s)return s(a,!0);throw new Error("Cannot find module '"+a+"'")}var u=r[a]={exports:{}};e[a][0].call(u.exports,function(t){var r=e[a][1][t];return n(r?r:t)},u,u.exports,t,e,r,i)}return r[a].exports}for(var s="function"==typeof require&&require,a=0;a<i.length;a++)n(i[a]);return n}({1:[function(t,e,r){function i(){}var n=e.exports={};n.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};if(e){var r=[];return window.addEventListener("message",function(t){var e=t.source;if((e===window||null===e)&&"process-tick"===t.data&&(t.stopPropagation(),r.length>0)){var i=r.shift();i()}},!0),function(t){r.push(t),window.postMessage("process-tick","*")}}return function(t){setTimeout(t,0)}}(),n.title="browser",n.browser=!0,n.env={},n.argv=[],n.on=i,n.addListener=i,n.once=i,n.off=i,n.removeListener=i,n.removeAllListeners=i,n.emit=i,n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")}},{}],2:[function(t,e,r){(function(i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}();!function(t,i){"undefined"!=typeof r&&"undefined"!=typeof e?e.exports=i():"function"==typeof define&&"object"==typeof define.amd?define(i):this[t]=i()}("VC",function(){function e(t,e,r,i){for(var n=!0;n;){var s=t,a=e,h=r,o=i;if(n=!1,!s||!a)return void 0;if(!h&&a.indexOf(".")>-1)h=a.split("."),t=s[h[0]],e=h[0],r=h,i=1,n=!0;else{if(!h||!h[o+1])return h&&h[o]?s[h[o]]:s[a];t=s[h[o]],e=h[o],r=h,i=o+1,n=!0}}}function r(t,e,r){if(!t||!e)throw new Error("objectSetMethod 需要object和key参数");var i=e.split(".");try{return i.reduce(function(t,e,n){return void 0!==i[n+1]?(t[e]||(t[e]=a.regx.numeric.test(i[n+1])?[]:{}),t[e]):(t[e]=r,t)},t),!0}catch(n){return!1}}var a=t("./validator.js"),h=function(){function t(i,s){n(this,t),this.key=null,this._errs=[],this.errorFields=[],this._san={},this._alias={},this.opt=s?!0:!1,this.target=i,this.takeWhatWeHave=s,this.inArrayMode=!1,this.inArray={index:0,arrayKey:null},this.getter=e,this.setter=r}return s(t,[{key:"addError",value:function(t){if(Array.isArray(t))return void(this._errs=this._errs.concat(t));if(this.inArrayMode){var i=this.inArray,n=i.index,s=i.arrayKey,a=this._alias[s],h=e(this.target,s)[n],o=this._alias[s+"."+n+"."+this.key],u=h&&!e(h,this.key);o=u?(a||s)+"."+n:(a||s)+"."+n+"."+(o||this.key),this.errorFields.push(s+"."+n+(u?"":"."+this.key)),e(this._san,s)[n]&&r(this._san,s+"."+n+(u?"":this.key),void 0)}else{e(this._san,this.key)&&r(this._san,this.key,void 0);var o=this._alias[this.key];this.errorFields.push(this.key)}o&&(t=o+": "+t.replace(/\S+\:\s/,"")),this._errs.push(t)}},{key:"alias",value:function(t){if(!this.key)return this.next=!1,this;if(this.inArrayMode){var e=this.inArray,r=e.index,i=e.arrayKey;this._alias[i+"."+r+"."+this.key]=t}else this._alias[this.key]=t;return this}},{key:"check",value:function(t){this.key=t,this.next=!0,this.opt=!1;var e=this.currentVal;return void 0!==e?this.inArrayMode||r(this._san,t,e):this.opt=!0,this}},{key:"array",value:function(t,e){if(!this.next)return this;var i=this.currentVal;if(this.opt&&!i)return this;if(Array.isArray(i)){if("function"==typeof t){this.inArrayMode=!0,this.inArray.arrayKey=this.key,r(this._san,this.key,i);var n=this;i.forEach(function(e,r){n.inArray.index=r,t(n,r)}),this.inArrayMode=!1}}else this.addError(e||this.key+": 需要为一个数组");return this}},{key:"required",value:function(t){return this.takeWhatWeHave?(this.opt=!0,this):this.next?(this.opt=!1,void 0===this.currentVal&&(this.addError(t||this.key+": 为必填字段"),this.next=!1),this):this}},{key:"optional",value:function(){return this.next?(this.opt=!0,this):this}},{key:"between",value:function(t,e,r){if(!this.next)return this;var i=this.currentVal;if(this.opt&&!i)return this;var n=typeof i;return("string"===n||Array.isArray(i))&&(i.length>e||i.length<t)?this.addError(r||this.key+": 长度应该在"+t+"-"+e+"个字符之间"):"number"===n&&(i>e||t>i)&&this.addError(r||this.key+": 大小应该在"+t+"-"+e+"之间"),this}},{key:"max",value:function(t,e){if(!this.next)return this;var r=this.currentVal;if(this.opt&&!r)return this;var i=typeof r;return("string"===i||Array.isArray(r))&&r.length>t?this.addError(e||this.key+": 最多"+t+"个字符"):"number"===i&&r>t&&this.addError(e||this.key+": 最大值为"+t),this}},{key:"min",value:function(t,e){if(!this.next)return this;var r=this.currentVal;if(this.opt&&!r)return this;var i=typeof r;return("string"===i||Array.isArray(r))&&r.length<t?this.addError(e||this.key+": 最少"+t+"个字符"):"number"===i&&t>r&&this.addError(e||this.key+": 最小值为"+t),this}},{key:"regx",value:function(t,e,r){if(!this.next)return this;var i=this.currentVal;return this.opt&&!i?this:("[object RegExp]"!==Object.prototype.toString.call(t)&&(t=new RegExp(t,r)),t.test(i)||this.addError(e||this.key+": 不合格"+t.toString()+"的格式"),this)}},{key:"$apply",value:function(t,e){if(!this.next)return this;var r=this.currentVal;if(this.opt&&!r)return this;if("function"!=typeof t)throw new Error("$apply第一个参数必须为function");return t(r)||this.addError(e||this.key+": "+r+"不是正确的格式"),this}},{key:"date",value:function(t){if(!this.next)return this;var e=this.currentVal;return this.opt&&!e?this:(a.isDate(e)||this.addError(t||this.key+": "+e+"不符合日期格式"),this)}},{key:"before",value:function(t,e){if(!this.next)return this;var r=this.currentVal;return this.opt&&!r?this:(a.isBefore(r,t)||this.addError(e||this.key+": "+r+"需要在"+t+"之前"),this)}},{key:"after",value:function(t,e){if(!this.next)return this;var r=this.currentVal;return this.opt&&!r?this:(a.isAfter(r,t)||this.addError(e||this.key+": "+r+"需要在"+t+"之后"),this)}},{key:"in",value:function(t,e){if(!this.next)return this;var r=this.currentVal;return this.opt&&!r?this:(a.isIn(r,t)||this.addError(e||this.key+": "+r+"需要在["+t.toString()+"]之中"),this)}},{key:"email",value:function(t,e){if(!this.next)return this;var r=this.currentVal;return this.opt&&!r?this:(a.isEmail(r,e)||this.addError(t||this.key+": "+r+"不是常规的email"),this)}},{key:"JSON",value:function(t){if(!this.next)return this;var e=this.currentVal;return this.opt&&!e?this:(a.isJSON(e)||this.addError(t||this.key+": "+e+"不是JSON格式字符串"),this)}},{key:"URL",value:function(t,e){if(!this.next)return this;var r=this.currentVal;return this.opt&&!r?this:(a.isURL(r,e)||this.addError(t||this.key+": "+r+"不符合URL的格式"),this)}},{key:"phone",value:function(t){return this.regx(a.regx.phone,t||this.key+": "+this.currentVal+"不是常规的手机号码")}},{key:"numeric",value:function(t){return this.regx(a.regx.numeric,t||this.key+": "+this.currentVal+"必须为纯数字")}},{key:"decimal",value:function(t){return this.regx(a.regx.decimal,t||this.key+": "+this.currentVal+"必须为小数格式数字")}},{key:"float",value:function(t){return this.regx(a.regx["float"],t||this.key+": "+this.currentVal+"必须为float格式数字")}},{key:"hex",value:function(t){return this.regx(a.regx.hexadecimal,t||this.key+": "+this.currentVal+"必须为16进制数字")}},{key:"alpha",value:function(t){return this.regx(a.regx.alpha,t||this.key+": "+this.currentVal+"必须为纯字母")}},{key:"alphanumeric",value:function(t){return this.regx(a.regx.alphanumeric,t||this.key+": "+this.currentVal+"必须为纯字母和数字的组合")}},{key:"ascii",value:function(t){return this.regx(a.regx.ascii,t||this.key+": "+this.currentVal+"必须为符合规范的ASCII码")}},{key:"objectId",value:function(t){return this.regx(a.regx.objectId,t||this.currentVal+"不是常规的ObjectId")}},{key:"base64",value:function(t){return this.regx(a.regx.base64,t||this.key+": "+this.currentVal+"必须为符合规范的Base64编码")}},{key:"creditCard",value:function(t){if(!this.next)return this;var e=this.currentVal;return this.opt&&!e?this:(a.isCreditCard(e)||this.addError(t||this.key+": "+e+"不符合信用卡的格式"),this)}},{key:"setSanitizedVal",value:function(t){if(this.inArrayMode){var i=this.inArray,n=i.index,s=i.arrayKey,a=e(this.target,s)[n],h=a&&!e(a,this.key);h?r(this._san,s+"."+n,t):r(this._san,s+"."+n+"."+this.key,t)}else r(this._san,this.key,t)}},{key:"sanitize",value:function(t){if(!this.next)return this;var e=this.currentVal;if(this.opt&&!e)return this;if("function"!=typeof t)throw new Error("sanitize第一个参数必须为function");return this.setSanitizedVal(t(e)),this}},{key:"trim",value:function(){if(!this.next)return this;var t=this.currentVal;return this.opt&&!t?this:(this.setSanitizedVal(t.trim?t.trim():t),this)}},{key:"whitelist",value:function(t){if(!this.next)return this;var e=this.currentVal;return this.opt&&!e?this:(this.setSanitizedVal(e.replace(new RegExp("[^"+t+"]+","g"),"")),this)}},{key:"blacklist",value:function(t){if(!this.next)return this;var e=this.currentVal;return this.opt&&!e?this:(this.setSanitizedVal(e.replace(new RegExp("["+t+"]+","g"),"")),this)}},{key:"escape",value:function(){if(!this.next)return this;var t=this.currentVal;return this.opt&&!t?this:(this.setSanitizedVal(t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\//g,"&#x2F;").replace(/\`/g,"&#96;")),this)}},{key:"toBoolean",value:function(t){if(!this.next)return this;var e=this.currentVal;return this.opt&&!e?this:(t&&this.setSanitizedVal("1"===e||"true"===e),this.setSanitizedVal("0"!==e&&"false"!==e&&""!==e),this)}},{key:"toDate",value:function(){if(!this.next)return this;var t=this.currentVal;if(this.opt&&!t)return this;if("[object Date]"===Object.prototype.toString.call(t))this.setSanitizedVal(t);else{var e=Date.parse(t);this.setSanitizedVal(isNaN(e)?null:new Date(e))}return this}},{key:"toFloat",value:function(){if(!this.next)return this;var t=this.currentVal;return this.opt&&!t?this:(this.setSanitizedVal(parseFloat(t)),this)}},{key:"toInt",value:function(t){if(!this.next)return this;var e=this.currentVal;return this.opt&&!e?this:(this.setSanitizedVal(parseInt(e,t||10)),this)}},{key:"toString",value:function(){if(!this.next)return this;var t=this.currentVal;return this.opt&&!t?this:("object"==typeof t&&null!==t&&t.toString?this.setSanitizedVal(t.toString()):null===t||"undefined"==typeof t||isNaN(t)&&!t.length?this.setSanitizedVal(""):"string"!=typeof t&&this.setSanitizedVal(t+""),this)}},{key:"compose",value:function(e,r){this.key=e;var i=new t(this.currentVal,this.takeWhatWeHave),n=r(i),s=n||i,a=s.sanitized,h=s.errors;if(this.setSanitizedVal(a),h&&h.length>0){var o=this._alias[e]||e;this.addError(h.map(function(t){return o+"."+t}))}return this}},{key:"flatedArray",value:function(e,i){var n=this;if("string"==typeof e){this.key=e;var s=this.currentVal;Object.keys(s).forEach(function(a,h){var o=new t(s[a],n.takeWhatWeHave),u=i(o,s[a]),l=u||o,f=l.sanitized,c=l.errors;if(r(n._san,e+"."+a,f),c&&c.length>0){var d=(n._alias[e]||e)+"."+a;n.addError(c.map(function(t){return d+"."+t}))}})}else Object.keys(this.target).forEach(function(r,i){n.key=r;var s=new t(n.currentVal,n.takeWhatWeHave),a=e(s,n.currentVal),h=a||s,o=h.sanitized,u=h.errors;n.setSanitizedVal(o),u&&u.length>0&&n.addError(u.map(function(t){return r+"."+t}))});return this}},{key:"errors",get:function(){return this._errs[0]?this._errs:null}},{key:"sanitized",get:function(){return Object.keys(this._san).length>0?this._san:null}},{key:"currentVal",get:function(){if(this.inArrayMode){var t=e(this.target,this.inArray.arrayKey),r=t[this.inArray.index],i=e(r,this.key);return r&&i?i:r}return e(this.target,this.key)}}]),t}();return i.browser&&(window.VC=h,window.Validator=a),h})}).call(this,t("1YiZ5S"))},{"./validator.js":3,"1YiZ5S":1}],3:[function(t,e,r){"use strict";function i(t,e){t=t||{};for(var r in e)"undefined"==typeof t[r]&&(t[r]=e[r]);return t}function n(t){return"object"==typeof t&&null!==t&&t.toString?t=t.toString():null===t||"undefined"==typeof t||isNaN(t)&&!t.length?t="":"string"!=typeof t&&(t+=""),t}function s(t){return"[object Date]"===Object.prototype.toString.call(t)?t:(t=Date.parse(t),isNaN(t)?null:new Date(t))}function a(t){return!isNaN(Date.parse(t))}function h(t,e){var r=s(e||new Date),i=s(t);return!!(i&&r&&r>i)}function o(t,e){var r=s(e||new Date),i=s(t);return!!(i&&r&&i>r)}function u(t,e){var r;if("[object Array]"===Object.prototype.toString.call(e)){var i=[];for(r in e)i[r]=n(e[r]);return i.indexOf(t)>=0}return"object"==typeof e?e.hasOwnProperty(t):e&&"function"==typeof e.indexOf?e.indexOf(t)>=0:!1}function l(t){return v.email.test(t)}function f(){try{var t=JSON.parse(str);return!!t&&"object"==typeof t}catch(e){}return!1}function c(t){return v.ipv4Maybe.test(t)||v.ipv6Block.test(t)}function d(t,e){if(!t||t.length>=2083||/\s/.test(t))return!1;if(0===t.indexOf("mailto:"))return!1;e=i(e,k);var r,n,s,a,h,o,u;if(u=t.split("://"),u.length>1){if(r=u.shift(),e.require_valid_protocol&&-1===e.protocols.indexOf(r))return!1}else{if(e.require_protocol)return!1;e.allow_protocol_relative_urls&&"//"===t.substr(0,2)&&(u[0]=t.substr(2))}return t=u.join("://"),u=t.split("#"),t=u.shift(),u=t.split("?"),t=u.shift(),u=t.split("/"),t=u.shift(),u=t.split("@"),u.length>1&&(n=u.shift(),n.indexOf(":")>=0&&n.split(":").length>2)?!1:(a=u.join("@"),u=a.split(":"),s=u.shift(),u.length&&(o=u.join(":"),h=parseInt(o,10),!/^[0-9]+$/.test(o)||0>=h||h>65535)?!1:c(s)||y(s,e)||"localhost"===s?e.host_whitelist&&-1===e.host_whitelist.indexOf(s)?!1:e.host_blacklist&&-1!==e.host_blacklist.indexOf(s)?!1:!0:!1)}function y(t,e){e=i(e,g),e.allow_trailing_dot&&"."===t[t.length-1]&&(t=t.substring(0,t.length-1));var r=t.split(".");if(e.require_tld){var n=r.pop();if(!r.length||!/^([a-z\u00a1-\uffff]{2,}|xn[a-z0-9-]{2,})$/i.test(n))return!1}for(var s,a=0;a<r.length;a++){if(s=r[a],e.allow_underscores){if(s.indexOf("__")>=0)return!1;s=s.replace(/_/g,"")}if(!/^[a-z\u00a1-\uffff0-9-]+$/i.test(s))return!1;if(/[\uff01-\uff5e]/.test(s))return!1;if("-"===s[0]||"-"===s[s.length-1]||s.indexOf("---")>=0)return!1}return!0}function p(t){var e=t.replace(/[^0-9]+/g,"");if(!v.creditCard.test(e))return!1;for(var r,i,n,s=0,a=e.length-1;a>=0;a--)r=e.substring(a,a+1),i=parseInt(r,10),n?(i*=2,s+=i>=10?i%10+1:i):s+=i,n=!n;return!!(s%10===0?e:!1)}Object.defineProperty(r,"__esModule",{value:!0}),r.toDate=s,r.isDate=a,r.isBefore=h,r.isAfter=o,r.isIn=u,r.isEmail=l,r.isJSON=f,r.isIP=c,r.isURL=d,r.isFQDN=y,r.isCreditCard=p;var v={phone:/^(\+?0?86\-?)?1[345789]\d{9}$/,email:/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i,creditCard:/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\d{3})\d{11})$/,objectId:/^[0-9a-fA-F]{24}$/,alpha:/^[A-Z]+$/i,alphanumeric:/^[0-9A-Z]+$/i,numeric:/^[-+]?[0-9]+$/,"int":/^(?:[-+]?(?:0|[1-9][0-9]*))$/,"float":/^(?:[-+]?(?:[0-9]+))?(?:\.[0-9]*)?(?:[eE][\+\-]?(?:[0-9]+))?$/,hexadecimal:/^[0-9A-F]+$/i,decimal:/^[-+]?([0-9]+|\.[0-9]+|[0-9]+\.[0-9]+)$/,hexcolor:/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i,ascii:/^[\x00-\x7F]+$/,base64:/^(?:[A-Z0-9+\/]{4})*(?:[A-Z0-9+\/]{2}==|[A-Z0-9+\/]{3}=|[A-Z0-9+\/]{4})$/i,ipv4Maybe:/^(\d+)\.(\d+)\.(\d+)\.(\d+)$/,ipv6Block:/^[0-9A-F]{1,4}$/i};r.regx=v;var k={protocols:["http","https","ftp"],require_tld:!0,require_protocol:!1,require_valid_protocol:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_protocol_relative_urls:!1},g={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1}},{}]},{},[2]);